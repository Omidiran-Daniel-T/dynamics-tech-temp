{"ast":null,"code":"import React, { useRef, useState, useEffect, useLayoutEffect, useImperativeHandle } from 'react';\nimport { css } from 'emotion';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n} // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n\n\nif (!Array.prototype.includes) {\n  Object.defineProperty(Array.prototype, 'includes', {\n    value: function value(valueToFind, fromIndex) {\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      } // 1. Let O be ? ToObject(this value).\n\n\n      var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n      var len = o.length >>> 0; // 3. If len is 0, return false.\n\n      if (len === 0) {\n        return false;\n      } // 4. Let n be ? ToInteger(fromIndex).\n      //    (If fromIndex is undefined, this step produces the value 0.)\n\n\n      var n = fromIndex | 0; // 5. If n ≥ 0, then\n      //  a. Let k be n.\n      // 6. Else n < 0,\n      //  a. Let k be len + n.\n      //  b. If k < 0, let k be 0.\n\n      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n      function sameValueZero(x, y) {\n        return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n      } // 7. Repeat, while k < len\n\n\n      while (k < len) {\n        // a. Let elementK be the result of ? Get(O, ! ToString(k)).\n        // b. If SameValueZero(valueToFind, elementK) is true, return true.\n        if (sameValueZero(o[k], valueToFind)) {\n          return true;\n        } // c. Increase k by 1.\n\n\n        k++;\n      } // 8. Return false\n\n\n      return false;\n    }\n  });\n} // Production steps of ECMA-262, Edition 6, 22.1.2.1\n\n\nif (!Array.from) {\n  Array.from = function () {\n    var toStr = Object.prototype.toString;\n\n    var isCallable = function isCallable(fn) {\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n    };\n\n    var toInteger = function toInteger(value) {\n      var number = Number(value);\n\n      if (isNaN(number)) {\n        return 0;\n      }\n\n      if (number === 0 || !isFinite(number)) {\n        return number;\n      }\n\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n    };\n\n    var maxSafeInteger = Math.pow(2, 53) - 1;\n\n    var toLength = function toLength(value) {\n      var len = toInteger(value);\n      return Math.min(Math.max(len, 0), maxSafeInteger);\n    }; // The length property of the from method is 1.\n\n\n    return function from(arrayLike\n    /*, mapFn, thisArg */\n    ) {\n      // 1. Let C be the this value.\n      var C = this; // 2. Let items be ToObject(arrayLike).\n\n      var items = Object(arrayLike); // 3. ReturnIfAbrupt(items).\n\n      if (arrayLike == null) {\n        throw new TypeError('Array.from requires an array-like object - not null or undefined');\n      } // 4. If mapfn is undefined, then let mapping be false.\n\n\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n      var T;\n\n      if (typeof mapFn !== 'undefined') {\n        // 5. else\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n        if (!isCallable(mapFn)) {\n          throw new TypeError('Array.from: when provided, the second argument must be a function');\n        } // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n        if (arguments.length > 2) {\n          T = arguments[2];\n        }\n      } // 10. Let lenValue be Get(items, \"length\").\n      // 11. Let len be ToLength(lenValue).\n\n\n      var len = toLength(items.length); // 13. If IsConstructor(C) is true, then\n      // 13. a. Let A be the result of calling the [[Construct]] internal method\n      // of C with an argument list containing the single item len.\n      // 14. a. Else, Let A be ArrayCreate(len).\n\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len); // 16. Let k be 0.\n\n      var k = 0; // 17. Repeat, while k < len… (also steps a - h)\n\n      var kValue;\n\n      while (k < len) {\n        kValue = items[k];\n\n        if (mapFn) {\n          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n        } else {\n          A[k] = kValue;\n        }\n\n        k += 1;\n      } // 18. Let putStatus be Put(A, \"length\", len, true).\n\n\n      A.length = len; // 20. Return A.\n\n      return A;\n    };\n  }();\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n                                    flex: 0 0 auto;\\n                                    height: 100%;\\n                                    width: auto;\\n                                    max-width: 100%;\\n                                    object-fit: contain;\\n                                    overflow-y: auto;\\n                                    display: block;\\n                                    user-select: none;\\n\\n                                    * {\\n                                        /* height: 100%; */\\n                                        /* width: auto; */\\n                                        max-width: 100%;\\n                                        object-fit: contain;\\n                                    }\\n                                \"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n                            position: absolute;\\n                            height: 100%;\\n                            left: 0;\\n                            right: 0;\\n                            pointer-events: none;\\n                            z-index: 20;\\n                            * {\\n                                pointer-events: auto;\\n                            }\\n                        \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n                    height: 28em;\\n                \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar FULLY_VISIBLE = 'FULLY_VISIBLE';\nvar PARTIALLY_VISIBLE = 'PARTIALLY_VISIBLE';\nvar NOT_VISIBLE = 'NOT_VISIBLE';\n\nfunction getStatus(items) {\n  var previous = null;\n  var current = [];\n  var next = null;\n  var prevItem;\n  items.forEach(function (item) {\n    // There may be any number of FULLY_VISIBLE items.\n    if (item.visibility === FULLY_VISIBLE) {\n      current.push(item.index);\n    } // There can only be two simultaneous PARTIALLY_VISIBLE items.\n    // If they are adjacent, there can be no FULLY_VISIBLE items.\n    // So these two items are 'previous' and 'next'.\n    else if (item.visibility === PARTIALLY_VISIBLE && prevItem && prevItem.visibility === PARTIALLY_VISIBLE) {\n      previous = prevItem.index;\n      next = item.index;\n    } // Keep pushing 'previous' forward each iteration until one of\n    // the above cases is true.\n    else if (current.length === 0 && next === null) {\n      previous = item.index;\n    } // The item following the final FULLY_VISIBLE item is 'next'.\n    else if (current.length > 0 && next === null) {\n      next = item.index;\n    } // Save this item to refer back to in the next iteration.\n\n\n    prevItem = item;\n  });\n  return {\n    previous: previous,\n    current: current,\n    next: next\n  };\n}\n\nvar ImageScroller = React.forwardRef(Scroller);\n\nfunction Scroller(_ref, ref) {\n  var children = _ref.children,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$hideScrollbar = _ref.hideScrollbar,\n      hideScrollbar = _ref$hideScrollbar === void 0 ? true : _ref$hideScrollbar,\n      _ref$innerClassName = _ref.innerClassName,\n      innerClassName = _ref$innerClassName === void 0 ? '' : _ref$innerClassName,\n      _ref$innerStyle = _ref.innerStyle,\n      items = _ref.items,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,\n      _ref$renderWithin = _ref.renderWithin,\n      renderWithin = _ref$renderWithin === void 0 ? null : _ref$renderWithin,\n      _ref$scrollOnClick = _ref.scrollOnClick,\n      scrollOnClick = _ref$scrollOnClick === void 0 ? true : _ref$scrollOnClick,\n      _ref$scrollWithArrows = _ref.scrollWithArrows,\n      scrollWithArrows = _ref$scrollWithArrows === void 0 ? true : _ref$scrollWithArrows,\n      _ref$scrollContainerC = _ref.scrollContainerClassName,\n      scrollContainerClassName = _ref$scrollContainerC === void 0 ? '' : _ref$scrollContainerC,\n      _ref$scrollContainerS = _ref.scrollContainerStyle,\n      scrollContainerStyle = _ref$scrollContainerS === void 0 ? {} : _ref$scrollContainerS,\n      props = _objectWithoutProperties(_ref, [\"children\", \"className\", \"hideScrollbar\", \"innerClassName\", \"innerStyle\", \"items\", \"onChange\", \"renderWithin\", \"scrollOnClick\", \"scrollWithArrows\", \"scrollContainerClassName\", \"scrollContainerStyle\"]); // Either `items` or `children` may be used to set scroll items (`items` has priority)\n\n\n  items = items || React.Children.toArray(children);\n  var mainRef = useRef(null);\n  var scrollContainerRef = useRef(null);\n  var itemsContainerRef = useRef(null); // Track the indices of relevant items\n\n  var _useState = useState({\n    previous: null,\n    current: [],\n    next: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  useLayoutEffect(function () {\n    var main = mainRef.current;\n    var sc = scrollContainerRef.current;\n    sc.style.overflowX = 'scroll';\n    /* Manually hide the horizontal scrollbar with a hidden overflow.\r\n       `scrollbar-width: none` is not available across-the-board at time of implementation.\r\n    */\n\n    if (hideScrollbar) {\n      main.style.overflowY = 'hidden';\n      var scrollbarWidth = main.clientHeight - sc.clientHeight;\n      sc.style.height = \"calc(100% + \".concat(scrollbarWidth, \"px)\");\n    } else {\n      main.style.overflowY = '';\n      sc.style.height = '100%';\n    }\n    /* Manually limit the height of the contents of each item wrapper. There is no\r\n       reliable CSS solution due to some weird shenanigans with the intrinsic\r\n       height of images, or something – I'm not quite sure. I could not find a way\r\n       to reliably limit the width of the item wrapper to its contents\r\n       (aka shrinkwrap). Edge/IE semi-randomly set the wrapper width to the pixel\r\n       width of the containing img instead of following the intrinsic ratio of its\r\n       height, and Firefox/Chrome introduced a phantom padding-right when toggling\r\n       the scrollbar (caused by extra width).\r\n    */\n\n\n    _toConsumableArray(itemsContainerRef.current.children).forEach(function (item) {\n      item.style.height = \"\".concat(sc.clientHeight, \"px\");\n    });\n    /* Make sure renderWithin doesn't overlap the scrollContainer's scrollbar.\r\n       `renderWithin` is absolutely positioned, so the padding and scrollbar of the\r\n       parent element are ignored.\r\n    */\n\n\n    _toConsumableArray(sc.children).forEach(function (element) {\n      element.style.maxHeight = \"\".concat(sc.clientHeight, \"px\");\n    });\n  }, [hideScrollbar]);\n  useEffect(function () {\n    // IntersectionObservers only report what's _changed_, so keep a list\n    var intersectionRatios = new Map();\n    var observer = new IntersectionObserver(observerCallback, {\n      root: scrollContainerRef.current,\n      threshold: [0, 0.98]\n    });\n\n    _toConsumableArray(itemsContainerRef.current.children).forEach(function (item) {\n      observer.observe(item);\n    });\n\n    function observerCallback(entries) {\n      // Update the current intersectionRatio of each entry\n      entries.forEach(function (entry) {\n        intersectionRatios.set(parseInt(entry.target.getAttribute('data-item-id'), 10), entry.intersectionRatio);\n      }); // Update the status\n\n      var items = _toConsumableArray(itemsContainerRef.current.children);\n\n      var visibilityList = items.map(function (item) {\n        var itemIndex = item.getAttribute('data-item-id');\n        itemIndex = parseInt(itemIndex, 10);\n        var ratio = intersectionRatios.get(itemIndex);\n        var visibility;\n\n        if (ratio > 0.98) {\n          visibility = FULLY_VISIBLE;\n        } else if (ratio === 0) {\n          visibility = NOT_VISIBLE;\n        } else visibility = PARTIALLY_VISIBLE;\n\n        return {\n          index: itemIndex,\n          visibility: visibility\n        };\n      });\n      var newStatus = getStatus(visibilityList);\n      setStatus(newStatus);\n      onChange(newStatus);\n    }\n  }, []);\n  useEffect(function () {\n    function handleKeyPress(event) {\n      if (scrollWithArrows && mainRef.current.contains(event.target)) {\n        if (event.key === 'ArrowRight') {\n          event.preventDefault();\n          next();\n        } else if (event.key === 'ArrowLeft') {\n          event.preventDefault();\n          previous();\n        }\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyPress);\n    return function cleanUp() {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [next, previous]);\n\n  function next() {\n    scrollTo(status.next, 'nearest');\n  }\n\n  function previous() {\n    scrollTo(status.previous, 'nearest');\n  }\n\n  function scrollTo(itemIndex) {\n    var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'center';\n\n    if (itemIndex === undefined || itemIndex === null || itemIndex < 0) {\n      return;\n    }\n\n    itemIndex = Math.min(itemIndex, items.length - 1);\n    var mainWidth = mainRef.current.offsetWidth;\n    var element = itemsContainerRef.current.children[itemIndex];\n    if (!element) return; // Option A: Center the item\n\n    if (position === 'center') {\n      var margin = (mainWidth - element.offsetWidth) / 2;\n      scrollContainerRef.current.scrollTo({\n        top: 0,\n        left: element.offsetLeft - margin,\n        // parent element must be positioned\n        behavior: 'smooth'\n      });\n    } // Option B: Fit in as many itemss as possible\n    else if (position === 'nearest') {\n      var fit = function fit(initialWidth, step) {\n        var width = 0;\n\n        while (true) {\n          var adjacentElement = itemsContainerRef.current.children[itemIndex + step];\n          if (!adjacentElement) break;\n          var adjacentWidth = adjacentElement.offsetWidth;\n\n          if (initialWidth + width + adjacentWidth < mainWidth) {\n            width += adjacentWidth;\n          } else {\n            break;\n          }\n\n          step += step;\n        }\n\n        return width;\n      }; // Determine the direction to look first\n\n\n      var step;\n\n      if (status.current.length > 0) {\n        step = itemIndex > status.current[0] ? -1 : 1;\n      } else {\n        step = itemIndex > status.previous ? -1 : 1;\n      } // Look back and ahead to see if any other items will fit too\n\n\n      var backWidth = fit(element.offsetWidth, step);\n      var aheadWidth = fit(element.offsetWidth + backWidth, -step);\n      var width = element.offsetWidth + backWidth + aheadWidth;\n\n      var _margin = (mainWidth - width) / 2;\n\n      scrollContainerRef.current.scrollTo({\n        top: 0,\n        left: element.offsetLeft - (step === 1 ? aheadWidth : backWidth) - _margin,\n        behavior: 'smooth'\n      });\n\n      if (element.offsetLeft === 0) {\n        mainRef.current.focus();\n      }\n    }\n  }\n\n  useImperativeHandle(ref, function () {\n    return {\n      next: next,\n      previous: previous,\n      scrollTo: scrollTo\n    };\n  }, [next, previous, scrollTo]);\n  return React.createElement(\"div\", _extends({\n    ref: mainRef,\n    tabIndex: 0\n  }, props, {\n    className: className + ' ' + css(_templateObject())\n  }), React.createElement(\"div\", _defineProperty({\n    ref: scrollContainerRef,\n    style: scrollContainerStyle,\n    className: scrollContainerClassName\n  }, \"style\", {\n    height: '100%',\n    overflowX: 'scroll'\n  }), renderWithin && React.createElement(\"div\", {\n    className: css(_templateObject2())\n  }, renderWithin({\n    scrollTo: scrollTo,\n    next: next,\n    previous: previous,\n    items: items,\n    status: status\n  })), React.createElement(\"div\", {\n    ref: itemsContainerRef,\n    className: innerClassName,\n    style: {\n      display: 'flex',\n      height: '100%',\n      position: 'relative' // for measuring offset of child items\n\n    }\n  }, items.map(function (item, itemIndex) {\n    return React.cloneElement(item, {\n      'data-item-id': itemIndex,\n      key: itemIndex,\n      onClick: function onClick(event) {\n        if (scrollOnClick) {\n          event.preventDefault();\n\n          if (status.current.includes(itemIndex)) {\n            scrollTo(itemIndex, 'centre');\n          } else {\n            scrollTo(itemIndex, 'nearest');\n          }\n        }\n      },\n      className: css(_templateObject3()) + ' ' + (item.props.className || '')\n    });\n  }))));\n}\n\nexport default ImageScroller;","map":{"version":3,"sources":["C:/Users/Daniel/Documents/projects/react/dynamics-tech/node_modules/react-image-scroller/dist/react-image-scroller.esm.js"],"names":["React","useRef","useState","useEffect","useLayoutEffect","useImperativeHandle","css","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_extends","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","arr2","iter","Symbol","iterator","toString","from","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","err","TypeError","includes","valueToFind","fromIndex","o","len","n","k","Math","max","abs","sameValueZero","x","y","isNaN","toStr","isCallable","fn","toInteger","number","Number","isFinite","floor","maxSafeInteger","pow","toLength","min","arrayLike","C","items","mapFn","T","A","kValue","_templateObject3","data","_templateObject2","_templateObject","FULLY_VISIBLE","PARTIALLY_VISIBLE","NOT_VISIBLE","getStatus","previous","current","prevItem","forEach","item","visibility","index","ImageScroller","forwardRef","Scroller","_ref","ref","children","_ref$className","className","_ref$hideScrollbar","hideScrollbar","_ref$innerClassName","innerClassName","_ref$innerStyle","innerStyle","_ref$onChange","onChange","_ref$renderWithin","renderWithin","_ref$scrollOnClick","scrollOnClick","_ref$scrollWithArrows","scrollWithArrows","_ref$scrollContainerC","scrollContainerClassName","_ref$scrollContainerS","scrollContainerStyle","props","Children","toArray","mainRef","scrollContainerRef","itemsContainerRef","_useState","_useState2","status","setStatus","main","sc","style","overflowX","overflowY","scrollbarWidth","clientHeight","height","concat","element","maxHeight","intersectionRatios","Map","observer","IntersectionObserver","observerCallback","root","threshold","observe","entries","entry","set","parseInt","getAttribute","intersectionRatio","visibilityList","map","itemIndex","ratio","get","newStatus","handleKeyPress","event","contains","preventDefault","window","addEventListener","cleanUp","removeEventListener","scrollTo","position","mainWidth","offsetWidth","margin","top","left","offsetLeft","behavior","fit","initialWidth","step","width","adjacentElement","adjacentWidth","backWidth","aheadWidth","_margin","focus","createElement","tabIndex","display","cloneElement","onClick"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect, useLayoutEffect, useImperativeHandle } from 'react';\nimport { css } from 'emotion';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\nif (!Array.prototype.includes) {\n  Object.defineProperty(Array.prototype, 'includes', {\n    value: function value(valueToFind, fromIndex) {\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      } // 1. Let O be ? ToObject(this value).\n\n\n      var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n      var len = o.length >>> 0; // 3. If len is 0, return false.\n\n      if (len === 0) {\n        return false;\n      } // 4. Let n be ? ToInteger(fromIndex).\n      //    (If fromIndex is undefined, this step produces the value 0.)\n\n\n      var n = fromIndex | 0; // 5. If n ≥ 0, then\n      //  a. Let k be n.\n      // 6. Else n < 0,\n      //  a. Let k be len + n.\n      //  b. If k < 0, let k be 0.\n\n      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n      function sameValueZero(x, y) {\n        return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n      } // 7. Repeat, while k < len\n\n\n      while (k < len) {\n        // a. Let elementK be the result of ? Get(O, ! ToString(k)).\n        // b. If SameValueZero(valueToFind, elementK) is true, return true.\n        if (sameValueZero(o[k], valueToFind)) {\n          return true;\n        } // c. Increase k by 1.\n\n\n        k++;\n      } // 8. Return false\n\n\n      return false;\n    }\n  });\n}\n\n// Production steps of ECMA-262, Edition 6, 22.1.2.1\nif (!Array.from) {\n  Array.from = function () {\n    var toStr = Object.prototype.toString;\n\n    var isCallable = function isCallable(fn) {\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n    };\n\n    var toInteger = function toInteger(value) {\n      var number = Number(value);\n\n      if (isNaN(number)) {\n        return 0;\n      }\n\n      if (number === 0 || !isFinite(number)) {\n        return number;\n      }\n\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n    };\n\n    var maxSafeInteger = Math.pow(2, 53) - 1;\n\n    var toLength = function toLength(value) {\n      var len = toInteger(value);\n      return Math.min(Math.max(len, 0), maxSafeInteger);\n    }; // The length property of the from method is 1.\n\n\n    return function from(arrayLike\n    /*, mapFn, thisArg */\n    ) {\n      // 1. Let C be the this value.\n      var C = this; // 2. Let items be ToObject(arrayLike).\n\n      var items = Object(arrayLike); // 3. ReturnIfAbrupt(items).\n\n      if (arrayLike == null) {\n        throw new TypeError('Array.from requires an array-like object - not null or undefined');\n      } // 4. If mapfn is undefined, then let mapping be false.\n\n\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n      var T;\n\n      if (typeof mapFn !== 'undefined') {\n        // 5. else\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n        if (!isCallable(mapFn)) {\n          throw new TypeError('Array.from: when provided, the second argument must be a function');\n        } // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n        if (arguments.length > 2) {\n          T = arguments[2];\n        }\n      } // 10. Let lenValue be Get(items, \"length\").\n      // 11. Let len be ToLength(lenValue).\n\n\n      var len = toLength(items.length); // 13. If IsConstructor(C) is true, then\n      // 13. a. Let A be the result of calling the [[Construct]] internal method\n      // of C with an argument list containing the single item len.\n      // 14. a. Else, Let A be ArrayCreate(len).\n\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len); // 16. Let k be 0.\n\n      var k = 0; // 17. Repeat, while k < len… (also steps a - h)\n\n      var kValue;\n\n      while (k < len) {\n        kValue = items[k];\n\n        if (mapFn) {\n          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n        } else {\n          A[k] = kValue;\n        }\n\n        k += 1;\n      } // 18. Let putStatus be Put(A, \"length\", len, true).\n\n\n      A.length = len; // 20. Return A.\n\n      return A;\n    };\n  }();\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n                                    flex: 0 0 auto;\\n                                    height: 100%;\\n                                    width: auto;\\n                                    max-width: 100%;\\n                                    object-fit: contain;\\n                                    overflow-y: auto;\\n                                    display: block;\\n                                    user-select: none;\\n\\n                                    * {\\n                                        /* height: 100%; */\\n                                        /* width: auto; */\\n                                        max-width: 100%;\\n                                        object-fit: contain;\\n                                    }\\n                                \"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n                            position: absolute;\\n                            height: 100%;\\n                            left: 0;\\n                            right: 0;\\n                            pointer-events: none;\\n                            z-index: 20;\\n                            * {\\n                                pointer-events: auto;\\n                            }\\n                        \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n                    height: 28em;\\n                \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\nvar FULLY_VISIBLE = 'FULLY_VISIBLE';\nvar PARTIALLY_VISIBLE = 'PARTIALLY_VISIBLE';\nvar NOT_VISIBLE = 'NOT_VISIBLE';\n\nfunction getStatus(items) {\n  var previous = null;\n  var current = [];\n  var next = null;\n  var prevItem;\n  items.forEach(function (item) {\n    // There may be any number of FULLY_VISIBLE items.\n    if (item.visibility === FULLY_VISIBLE) {\n      current.push(item.index);\n    } // There can only be two simultaneous PARTIALLY_VISIBLE items.\n    // If they are adjacent, there can be no FULLY_VISIBLE items.\n    // So these two items are 'previous' and 'next'.\n    else if (item.visibility === PARTIALLY_VISIBLE && prevItem && prevItem.visibility === PARTIALLY_VISIBLE) {\n        previous = prevItem.index;\n        next = item.index;\n      } // Keep pushing 'previous' forward each iteration until one of\n      // the above cases is true.\n      else if (current.length === 0 && next === null) {\n          previous = item.index;\n        } // The item following the final FULLY_VISIBLE item is 'next'.\n        else if (current.length > 0 && next === null) {\n            next = item.index;\n          } // Save this item to refer back to in the next iteration.\n\n\n    prevItem = item;\n  });\n  return {\n    previous: previous,\n    current: current,\n    next: next\n  };\n}\n\nvar ImageScroller = React.forwardRef(Scroller);\n\nfunction Scroller(_ref, ref) {\n  var children = _ref.children,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$hideScrollbar = _ref.hideScrollbar,\n      hideScrollbar = _ref$hideScrollbar === void 0 ? true : _ref$hideScrollbar,\n      _ref$innerClassName = _ref.innerClassName,\n      innerClassName = _ref$innerClassName === void 0 ? '' : _ref$innerClassName,\n      _ref$innerStyle = _ref.innerStyle,\n      items = _ref.items,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,\n      _ref$renderWithin = _ref.renderWithin,\n      renderWithin = _ref$renderWithin === void 0 ? null : _ref$renderWithin,\n      _ref$scrollOnClick = _ref.scrollOnClick,\n      scrollOnClick = _ref$scrollOnClick === void 0 ? true : _ref$scrollOnClick,\n      _ref$scrollWithArrows = _ref.scrollWithArrows,\n      scrollWithArrows = _ref$scrollWithArrows === void 0 ? true : _ref$scrollWithArrows,\n      _ref$scrollContainerC = _ref.scrollContainerClassName,\n      scrollContainerClassName = _ref$scrollContainerC === void 0 ? '' : _ref$scrollContainerC,\n      _ref$scrollContainerS = _ref.scrollContainerStyle,\n      scrollContainerStyle = _ref$scrollContainerS === void 0 ? {} : _ref$scrollContainerS,\n      props = _objectWithoutProperties(_ref, [\"children\", \"className\", \"hideScrollbar\", \"innerClassName\", \"innerStyle\", \"items\", \"onChange\", \"renderWithin\", \"scrollOnClick\", \"scrollWithArrows\", \"scrollContainerClassName\", \"scrollContainerStyle\"]);\n\n  // Either `items` or `children` may be used to set scroll items (`items` has priority)\n  items = items || React.Children.toArray(children);\n  var mainRef = useRef(null);\n  var scrollContainerRef = useRef(null);\n  var itemsContainerRef = useRef(null); // Track the indices of relevant items\n\n  var _useState = useState({\n    previous: null,\n    current: [],\n    next: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  useLayoutEffect(function () {\n    var main = mainRef.current;\n    var sc = scrollContainerRef.current;\n    sc.style.overflowX = 'scroll';\n    /* Manually hide the horizontal scrollbar with a hidden overflow.\r\n       `scrollbar-width: none` is not available across-the-board at time of implementation.\r\n    */\n\n    if (hideScrollbar) {\n      main.style.overflowY = 'hidden';\n      var scrollbarWidth = main.clientHeight - sc.clientHeight;\n      sc.style.height = \"calc(100% + \".concat(scrollbarWidth, \"px)\");\n    } else {\n      main.style.overflowY = '';\n      sc.style.height = '100%';\n    }\n    /* Manually limit the height of the contents of each item wrapper. There is no\r\n       reliable CSS solution due to some weird shenanigans with the intrinsic\r\n       height of images, or something – I'm not quite sure. I could not find a way\r\n       to reliably limit the width of the item wrapper to its contents\r\n       (aka shrinkwrap). Edge/IE semi-randomly set the wrapper width to the pixel\r\n       width of the containing img instead of following the intrinsic ratio of its\r\n       height, and Firefox/Chrome introduced a phantom padding-right when toggling\r\n       the scrollbar (caused by extra width).\r\n    */\n\n\n    _toConsumableArray(itemsContainerRef.current.children).forEach(function (item) {\n      item.style.height = \"\".concat(sc.clientHeight, \"px\");\n    });\n    /* Make sure renderWithin doesn't overlap the scrollContainer's scrollbar.\r\n       `renderWithin` is absolutely positioned, so the padding and scrollbar of the\r\n       parent element are ignored.\r\n    */\n\n\n    _toConsumableArray(sc.children).forEach(function (element) {\n      element.style.maxHeight = \"\".concat(sc.clientHeight, \"px\");\n    });\n  }, [hideScrollbar]);\n  useEffect(function () {\n    // IntersectionObservers only report what's _changed_, so keep a list\n    var intersectionRatios = new Map();\n    var observer = new IntersectionObserver(observerCallback, {\n      root: scrollContainerRef.current,\n      threshold: [0, 0.98]\n    });\n\n    _toConsumableArray(itemsContainerRef.current.children).forEach(function (item) {\n      observer.observe(item);\n    });\n\n    function observerCallback(entries) {\n      // Update the current intersectionRatio of each entry\n      entries.forEach(function (entry) {\n        intersectionRatios.set(parseInt(entry.target.getAttribute('data-item-id'), 10), entry.intersectionRatio);\n      }); // Update the status\n\n      var items = _toConsumableArray(itemsContainerRef.current.children);\n\n      var visibilityList = items.map(function (item) {\n        var itemIndex = item.getAttribute('data-item-id');\n        itemIndex = parseInt(itemIndex, 10);\n        var ratio = intersectionRatios.get(itemIndex);\n        var visibility;\n\n        if (ratio > 0.98) {\n          visibility = FULLY_VISIBLE;\n        } else if (ratio === 0) {\n          visibility = NOT_VISIBLE;\n        } else visibility = PARTIALLY_VISIBLE;\n\n        return {\n          index: itemIndex,\n          visibility: visibility\n        };\n      });\n      var newStatus = getStatus(visibilityList);\n      setStatus(newStatus);\n      onChange(newStatus);\n    }\n  }, []);\n  useEffect(function () {\n    function handleKeyPress(event) {\n      if (scrollWithArrows && mainRef.current.contains(event.target)) {\n        if (event.key === 'ArrowRight') {\n          event.preventDefault();\n          next();\n        } else if (event.key === 'ArrowLeft') {\n          event.preventDefault();\n          previous();\n        }\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyPress);\n    return function cleanUp() {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [next, previous]);\n\n  function next() {\n    scrollTo(status.next, 'nearest');\n  }\n\n  function previous() {\n    scrollTo(status.previous, 'nearest');\n  }\n\n  function scrollTo(itemIndex) {\n    var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'center';\n\n    if (itemIndex === undefined || itemIndex === null || itemIndex < 0) {\n      return;\n    }\n\n    itemIndex = Math.min(itemIndex, items.length - 1);\n    var mainWidth = mainRef.current.offsetWidth;\n    var element = itemsContainerRef.current.children[itemIndex];\n    if (!element) return; // Option A: Center the item\n\n    if (position === 'center') {\n      var margin = (mainWidth - element.offsetWidth) / 2;\n      scrollContainerRef.current.scrollTo({\n        top: 0,\n        left: element.offsetLeft - margin,\n        // parent element must be positioned\n        behavior: 'smooth'\n      });\n    } // Option B: Fit in as many itemss as possible\n    else if (position === 'nearest') {\n        var fit = function fit(initialWidth, step) {\n          var width = 0;\n\n          while (true) {\n            var adjacentElement = itemsContainerRef.current.children[itemIndex + step];\n            if (!adjacentElement) break;\n            var adjacentWidth = adjacentElement.offsetWidth;\n\n            if (initialWidth + width + adjacentWidth < mainWidth) {\n              width += adjacentWidth;\n            } else {\n              break;\n            }\n\n            step += step;\n          }\n\n          return width;\n        };\n\n        // Determine the direction to look first\n        var step;\n\n        if (status.current.length > 0) {\n          step = itemIndex > status.current[0] ? -1 : 1;\n        } else {\n          step = itemIndex > status.previous ? -1 : 1;\n        } // Look back and ahead to see if any other items will fit too\n\n\n        var backWidth = fit(element.offsetWidth, step);\n        var aheadWidth = fit(element.offsetWidth + backWidth, -step);\n        var width = element.offsetWidth + backWidth + aheadWidth;\n\n        var _margin = (mainWidth - width) / 2;\n\n        scrollContainerRef.current.scrollTo({\n          top: 0,\n          left: element.offsetLeft - (step === 1 ? aheadWidth : backWidth) - _margin,\n          behavior: 'smooth'\n        });\n\n        if (element.offsetLeft === 0) {\n          mainRef.current.focus();\n        }\n      }\n  }\n\n  useImperativeHandle(ref, function () {\n    return {\n      next: next,\n      previous: previous,\n      scrollTo: scrollTo\n    };\n  }, [next, previous, scrollTo]);\n  return React.createElement(\"div\", _extends({\n    ref: mainRef,\n    tabIndex: 0\n  }, props, {\n    className: className + ' ' + css(_templateObject())\n  }), React.createElement(\"div\", _defineProperty({\n    ref: scrollContainerRef,\n    style: scrollContainerStyle,\n    className: scrollContainerClassName\n  }, \"style\", {\n    height: '100%',\n    overflowX: 'scroll'\n  }), renderWithin && React.createElement(\"div\", {\n    className: css(_templateObject2())\n  }, renderWithin({\n    scrollTo: scrollTo,\n    next: next,\n    previous: previous,\n    items: items,\n    status: status\n  })), React.createElement(\"div\", {\n    ref: itemsContainerRef,\n    className: innerClassName,\n    style: {\n      display: 'flex',\n      height: '100%',\n      position: 'relative' // for measuring offset of child items\n\n    }\n  }, items.map(function (item, itemIndex) {\n    return React.cloneElement(item, {\n      'data-item-id': itemIndex,\n      key: itemIndex,\n      onClick: function onClick(event) {\n        if (scrollOnClick) {\n          event.preventDefault();\n\n          if (status.current.includes(itemIndex)) {\n            scrollTo(itemIndex, 'centre');\n          } else {\n            scrollTo(itemIndex, 'nearest');\n          }\n        }\n      },\n      className: css(_templateObject3()) + ' ' + (item.props.className || '')\n    });\n  }))));\n}\n\nexport default ImageScroller;\n"]},"metadata":{},"sourceType":"module"}