{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Daniel\\\\Documents\\\\projects\\\\react\\\\dynamics-tech\\\\src\\\\components\\\\signin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef, useContext } from \"react\";\nimport AuthContext from \"../context/AuthProvider\";\nimport axios from \"../api/axios\";\nimport NavBar from \"./navbar\";\nimport Message from \"../images/Message.png\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LOGIN_URL = \"/auth/login\";\nconst config = {\n  headers: {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Methods\": \"GET,PUT,POST,DELETE,PATCH,OPTIONS\"\n  }\n};\n\nconst SignIn = _ref => {\n  _s();\n\n  let {\n    navHidden,\n    hideNav,\n    switchNavState,\n    history\n  } = _ref;\n  const {\n    setAuth\n  } = useContext(AuthContext);\n  const userRef = useRef();\n  const errorRef = useRef();\n  const [user, setUser] = useState(\"\");\n  const [pwd, setPwd] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [success, setSuccess] = useState(false);\n  useEffect(() => {\n    userRef.current.focus();\n  }, []);\n  useEffect(() => {\n    setErrorMessage(\"\");\n  }, [user, pwd]);\n\n  const handleSubmit = async () => {\n    // console.log(user, pwd);\n    try {\n      var _response$data;\n\n      const response = await axios.post(LOGIN_URL, JSON.stringify({\n        email: user,\n        password: pwd\n      }), {\n        headers: {\n          \"Content-type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"GET,PUT,POST,DELETE,PATCH,OPTIONS\"\n        },\n        withCredentials: true\n      });\n      console.log(response === null || response === void 0 ? void 0 : response.data);\n      const accessToken = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.token;\n      setAuth({\n        user,\n        pwd,\n        accessToken\n      });\n      setUser(\"\");\n      setPwd(\"\");\n      setSuccess(true);\n      history.replace(\"/\");\n    } catch (err) {\n      var _err$response, _err$response2;\n\n      if (!err.response) {\n        setErrorMessage(\"Something Went Wrong\");\n      } else if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.statusCode) === 400) {\n        setErrorMessage(\"Cannot Process Request\");\n      } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.statusCode) === 401) {\n        setErrorMessage(\"Invalid Username or Password\");\n      } else {\n        setErrorMessage(\"Something Went Wrong\");\n      } // errorRef.focus();\n\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-screen\",\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      color: \"black\",\n      active: \"sign-in\",\n      navHidden: navHidden,\n      hideNav: hideNav,\n      switchNavState: switchNavState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col justify-center items-center h-screen pt-10 px-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-4xl font-bold text-center text-gray-700 tracking-widest\",\n        children: \"Sign in to your account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg  text-gray-500 my-2\",\n          children: \"Input your email and password to login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: errorRef,\n          className: \"text-xs text-red-500 text-center\",\n          \"aria-live\": \"assertive\",\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white h-12 flex items-center pl-5 rounded-lg shadow-lg my-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Message,\n            alt: \"e-icon\",\n            className: \"h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Email\",\n            className: \"h-full w-full px-3 text-gray-800 focus:outline-none placeholder-gray-700 rounded-lg\",\n            ref: userRef,\n            autoComplete: \"off\",\n            onChange: e => setUser(e.target.value),\n            value: user,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white h-12 flex items-center pl-5 rounded-lg shadow-lg my-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"22\",\n              height: \"22\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                clipRule: \"evenodd\",\n                d: \"M17.0108 14.6012C17.4248 14.6012 17.7608 14.2652 17.7608 13.8512V11.9992C17.7608 11.5852 17.4248 11.2492 17.0108 11.2492H11.3188C10.9948 10.1822 10.0128 9.39821 8.84076 9.39821C7.40676 9.39821 6.23976 10.5652 6.23976 11.9992C6.23976 13.4342 7.40676 14.6012 8.84076 14.6012C10.0128 14.6012 10.9948 13.8172 11.3188 12.7492H13.4308V13.8512C13.4308 14.2652 13.7668 14.6012 14.1808 14.6012C14.5948 14.6012 14.9308 14.2652 14.9308 13.8512V12.7492H16.2608V13.8512C16.2608 14.2652 16.5968 14.6012 17.0108 14.6012ZM7.66576 1.99921H16.3348C19.7228 1.99921 21.9998 4.37721 21.9998 7.91621V16.0832C21.9998 19.6222 19.7228 21.9992 16.3338 21.9992H7.66576C4.27676 21.9992 1.99976 19.6222 1.99976 16.0832V7.91621C1.99976 4.37721 4.27676 1.99921 7.66576 1.99921ZM7.73886 12.0001C7.73886 11.3921 8.23386 10.8981 8.84086 10.8981C9.44786 10.8981 9.94286 11.3921 9.94286 12.0001C9.94286 12.6071 9.44786 13.1011 8.84086 13.1011C8.23386 13.1011 7.73886 12.6071 7.73886 12.0001Z\",\n                fill: \"#2947B3\",\n                fillOpacity: \"0.8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            className: \"h-full w-full pl-2 pr-3 text-gray-800 focus:outline-none placeholder-gray-700 rounded-lg\",\n            onChange: e => setPwd(e.target.value),\n            value: pwd,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center my-3 cursor-pointer \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"remember-password w-5 h-5 mr-3 rounded-md\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700 hover:text-yellow-500\",\n            children: \"Remember password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-white bg-yellow-500 text-lg tracking-wide py-2 w-4/6 rounded-md m-auto my-7\\r hover:bg-yellow-600 cursor-pointer\",\n          onClick: e => {\n            e.preventDefault();\n            handleSubmit();\n          },\n          children: \"SIGN IN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-00 text-md font-semibold text-yellow-500 hover:text-yellow-600 cursor-pointer text-center mb-5 \",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgot-password-1\",\n            children: \"Forgot Password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex justify-center\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-gray-700\",\n            children: [\"Don\\u2019t have an account yet?\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-yellow-500 cursor-pointer hover:text-yellow-600\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/sign-up\",\n                children: \"Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignIn, \"Sy7fMgRYJEmObgH1p1Jc4iVqav0=\");\n\n_c = SignIn;\nexport default SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["C:/Users/Daniel/Documents/projects/react/dynamics-tech/src/components/signin.jsx"],"names":["React","useEffect","useState","useRef","useContext","AuthContext","axios","NavBar","Message","Link","LOGIN_URL","config","headers","SignIn","navHidden","hideNav","switchNavState","history","setAuth","userRef","errorRef","user","setUser","pwd","setPwd","errorMessage","setErrorMessage","success","setSuccess","current","focus","handleSubmit","response","post","JSON","stringify","email","password","withCredentials","console","log","data","accessToken","token","replace","err","statusCode","e","target","value","preventDefault"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport AuthContext from \"../context/AuthProvider\";\r\nimport axios from \"../api/axios\";\r\nimport NavBar from \"./navbar\";\r\nimport Message from \"../images/Message.png\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst LOGIN_URL = \"/auth/login\";\r\nconst config = {\r\n  headers: {\r\n    \"Access-Control-Allow-Origin\": \"*\",\r\n    \"Access-Control-Allow-Methods\": \"GET,PUT,POST,DELETE,PATCH,OPTIONS\",\r\n  },\r\n};\r\n\r\nconst SignIn = ({ navHidden, hideNav, switchNavState, history }) => {\r\n  const { setAuth } = useContext(AuthContext);\r\n  const userRef = useRef();\r\n  const errorRef = useRef();\r\n\r\n  const [user, setUser] = useState(\"\");\r\n  const [pwd, setPwd] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  useEffect(() => {\r\n    userRef.current.focus();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setErrorMessage(\"\");\r\n  }, [user, pwd]);\r\n\r\n  const handleSubmit = async () => {\r\n    // console.log(user, pwd);\r\n    try {\r\n      const response = await axios.post(\r\n        LOGIN_URL,\r\n        JSON.stringify({ email: user, password: pwd }),\r\n        {\r\n          headers: {\r\n            \"Content-type\": \"application/json\",\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n            \"Access-Control-Allow-Methods\": \"GET,PUT,POST,DELETE,PATCH,OPTIONS\",\r\n          },\r\n          withCredentials: true,\r\n        }\r\n      );\r\n      console.log(response?.data);\r\n      const accessToken = response?.data?.token;\r\n      setAuth({ user, pwd, accessToken });\r\n      setUser(\"\");\r\n      setPwd(\"\");\r\n      setSuccess(true);\r\n      history.replace(\"/\");\r\n    } catch (err) {\r\n      if (!err.response) {\r\n        setErrorMessage(\"Something Went Wrong\");\r\n      } else if (err.response?.statusCode === 400) {\r\n        setErrorMessage(\"Cannot Process Request\");\r\n      } else if (err.response?.statusCode === 401) {\r\n        setErrorMessage(\"Invalid Username or Password\");\r\n      } else {\r\n        setErrorMessage(\"Something Went Wrong\");\r\n      }\r\n      // errorRef.focus();\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"w-screen\">\r\n      <NavBar\r\n        color=\"black\"\r\n        active=\"sign-in\"\r\n        navHidden={navHidden}\r\n        hideNav={hideNav}\r\n        switchNavState={switchNavState}\r\n      />\r\n      <div className=\"flex flex-col justify-center items-center h-screen pt-10 px-4\">\r\n        <span className=\"text-4xl font-bold text-center text-gray-700 tracking-widest\">\r\n          Sign in to your account\r\n        </span>\r\n        <form className=\"flex flex-col\">\r\n          <span className=\"text-lg  text-gray-500 my-2\">\r\n            Input your email and password to login\r\n          </span>\r\n          <div\r\n            ref={errorRef}\r\n            className=\"text-xs text-red-500 text-center\"\r\n            aria-live=\"assertive\"\r\n          >\r\n            {errorMessage}\r\n          </div>\r\n          <div className=\"bg-white h-12 flex items-center pl-5 rounded-lg shadow-lg my-3\">\r\n            <img src={Message} alt=\"e-icon\" className=\"h-4\" />\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              className=\"h-full w-full px-3 text-gray-800 focus:outline-none placeholder-gray-700 rounded-lg\"\r\n              ref={userRef}\r\n              autoComplete=\"off\"\r\n              onChange={(e) => setUser(e.target.value)}\r\n              value={user}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"bg-white h-12 flex items-center pl-5 rounded-lg shadow-lg my-3\">\r\n            <span>\r\n              <svg\r\n                width=\"22\"\r\n                height=\"22\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  clipRule=\"evenodd\"\r\n                  d=\"M17.0108 14.6012C17.4248 14.6012 17.7608 14.2652 17.7608 13.8512V11.9992C17.7608 11.5852 17.4248 11.2492 17.0108 11.2492H11.3188C10.9948 10.1822 10.0128 9.39821 8.84076 9.39821C7.40676 9.39821 6.23976 10.5652 6.23976 11.9992C6.23976 13.4342 7.40676 14.6012 8.84076 14.6012C10.0128 14.6012 10.9948 13.8172 11.3188 12.7492H13.4308V13.8512C13.4308 14.2652 13.7668 14.6012 14.1808 14.6012C14.5948 14.6012 14.9308 14.2652 14.9308 13.8512V12.7492H16.2608V13.8512C16.2608 14.2652 16.5968 14.6012 17.0108 14.6012ZM7.66576 1.99921H16.3348C19.7228 1.99921 21.9998 4.37721 21.9998 7.91621V16.0832C21.9998 19.6222 19.7228 21.9992 16.3338 21.9992H7.66576C4.27676 21.9992 1.99976 19.6222 1.99976 16.0832V7.91621C1.99976 4.37721 4.27676 1.99921 7.66576 1.99921ZM7.73886 12.0001C7.73886 11.3921 8.23386 10.8981 8.84086 10.8981C9.44786 10.8981 9.94286 11.3921 9.94286 12.0001C9.94286 12.6071 9.44786 13.1011 8.84086 13.1011C8.23386 13.1011 7.73886 12.6071 7.73886 12.0001Z\"\r\n                  fill=\"#2947B3\"\r\n                  fillOpacity=\"0.8\"\r\n                />\r\n              </svg>\r\n            </span>\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              className=\"h-full w-full pl-2 pr-3 text-gray-800 focus:outline-none placeholder-gray-700 rounded-lg\"\r\n              onChange={(e) => setPwd(e.target.value)}\r\n              value={pwd}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"flex items-center my-3 cursor-pointer \">\r\n            <div className=\"remember-password w-5 h-5 mr-3 rounded-md\"></div>\r\n            <span className=\"text-gray-700 hover:text-yellow-500\">\r\n              Remember password\r\n            </span>\r\n          </div>\r\n          <button\r\n            className=\"text-white bg-yellow-500 text-lg tracking-wide py-2 w-4/6 rounded-md m-auto my-7\r\n          hover:bg-yellow-600 cursor-pointer\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              handleSubmit();\r\n            }}\r\n          >\r\n            SIGN IN\r\n          </button>\r\n          <div className=\"bg-red-00 text-md font-semibold text-yellow-500 hover:text-yellow-600 cursor-pointer text-center mb-5 \">\r\n            <Link to=\"/forgot-password-1\">Forgot Password?</Link>\r\n          </div>\r\n          <div className=\"w-full flex justify-center\">\r\n            <span className=\"font-semibold text-gray-700\">\r\n              Don’t have an account yet?\r\n              <span className=\"text-yellow-500 cursor-pointer hover:text-yellow-600\">\r\n                <Link to=\"/sign-up\">Sign Up</Link>\r\n              </span>\r\n            </span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n"]},"metadata":{},"sourceType":"module"}